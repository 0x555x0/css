(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[23067],{23067:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return m}});var n=i(24246),o=i(96608),s=i(82811),l=i(26610),c=i(45633),a=i(84204),u=i(65218),d=i.n(u),r=i(23615),p=i.n(r),_=i(27378),v=i(74677),h=i.n(v);let f=d()(()=>Promise.all([i.e(114),i.e(17300)]).then(i.bind(i,17300)),{loadableGenerated:{webpack:()=>[17300]},ssr:!1});function m(t){let{product:e}=t,{isAuthenticated:i,user:u,loginFromDispatch:d}=(0,a.a)(),{trackEcommerce:r}=(0,c.r)(),{openModal:p}=(0,_.useContext)(o.t),[v,m]=(0,_.useState)(!1),[g,w]=(0,_.useState)("/images/icon/icon-shopping-list-inactive.svg"),[k,b]=(0,_.useState)((null==e?void 0:e.wishlist_status)?null==e?void 0:e.wishlist_status:0);(0,_.useEffect)(()=>{b((null==e?void 0:e.wishlist_status)?null==e?void 0:e.wishlist_status:0)},[null==e?void 0:e.product_id]),(0,_.useEffect)(()=>{1===k?w("/images/icon/icon-shopping-list-active.svg"):w("/images/icon/icon-shopping-list-inactive.svg")},[k]);let y=async(t,n)=>{var o,c,a,_;if(t.preventDefault(),!i){p("mobileLogin",{fromPage:"product_detail_wish_list"}),d({type:"click_from",payload:{fromPage:"product_detail"}});return}if(m(!0),1===n){let t=await(0,l.FU)({token:null==u?void 0:null===(o=u.auth)||void 0===o?void 0:o.token,sellerId:s.x.sellerId,productId:null==e?void 0:e.product_id});(null==t?void 0:t.code)==="success"&&b(0),r({category:"pdp_".concat(e.name),action:"remove_from_wishlist",label:"".concat(null==e?void 0:e.product_id,"|").concat(e.name,"|").concat(null==e?void 0:null===(c=e.categories)||void 0===c?void 0:c[0]),product:e})}else{let t=await(0,l.mQ)({token:null==u?void 0:null===(a=u.auth)||void 0===a?void 0:a.token,sellerId:s.x.sellerId,productId:null==e?void 0:e.product_id});(null==t?void 0:t.code)==="success"&&b(1),r({category:"pdp_".concat(null==e?void 0:e.name),action:"add_to_wishlist",label:"".concat(null==e?void 0:e.product_id,"|").concat(null==e?void 0:e.name,"|").concat(null==e?void 0:null===(_=e.categories)||void 0===_?void 0:_[0]),product:e})}m(!1)};return(0,n.jsx)("button",{className:h().icon,"aria-label":"pdp_mb_wishlist",children:v?(0,n.jsx)("div",{className:h().loading,children:(0,n.jsx)(f,{})}):(0,n.jsx)("i",{className:h()["icon-heart"],style:{backgroundImage:"url('".concat(g,"')")},onClick:t=>y(t,k)})})}m.propTypes={product:p().object.isRequired}},82811:function(t,e,i){"use strict";i.d(e,{x:function(){return n}});let n={sellerId:1}},26610:function(t,e,i){"use strict";i.d(e,{FU:function(){return l},mQ:function(){return s},xn:function(){return o},yP:function(){return c}});var n=i(29147);async function o(t){let{token:e=null,offset:i=0,limit:o=16}=t;return(0,n.SD)({path:"/cart/v2?c=get_wishlist",options:{headers:{Token:e}}})}async function s(t){let{token:e,sellerId:i,productId:o}=t;return(0,n.SD)({path:"/cart/v2?c=update_wishlist_item",options:{headers:{Token:e},data:{seller_id:parseInt(i),product_id:parseInt(o)}}})}async function l(t){let{token:e,sellerId:i,productId:o}=t;return(0,n.SD)({path:"/cart/v2?c=delete_wishlist_item",options:{headers:{Token:e},data:{seller_id:parseInt(i),product_id:parseInt(o)}}})}async function c(t){let{productIds:e,options:i}=t;return(0,n.SD)({path:"/composite/v1/shopping/list/products",options:{headers:i.headers,data:{product_ids:e}}})}},74677:function(t){t.exports={icon:"wishlist_icon__JHhMa","icon-heart":"wishlist_icon-heart__zJjAV"}}}]);